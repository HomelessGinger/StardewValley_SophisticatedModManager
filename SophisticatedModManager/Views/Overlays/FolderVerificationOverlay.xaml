<UserControl x:Class="SophisticatedModManager.Views.Overlays.FolderVerificationOverlay"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="clr-namespace:SophisticatedModManager.ViewModels"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d"
             d:DataContext="{d:DesignInstance Type=vm:MainViewModel}">
    <Border Background="{StaticResource ContentBgBrush}" Padding="30,20">
        <DockPanel MaxWidth="600" HorizontalAlignment="Center">
            <TextBlock DockPanel.Dock="Top" Text="Verify Detected Folders"
                       FontSize="20" FontWeight="Bold"
                       Foreground="{StaticResource WoodBrownBrush}"
                       Margin="0,0,0,8"/>
            <TextBlock DockPanel.Dock="Top" TextWrapping="Wrap" FontSize="12"
                       Foreground="{StaticResource SubtleTextBrush}" Margin="0,0,0,4">
                Folders containing mods were found in your Mods directory. Please classify each one:
            </TextBlock>
            <TextBlock DockPanel.Dock="Top" TextWrapping="Wrap" FontSize="12"
                       Foreground="{StaticResource SubtleTextBrush}" Margin="0,0,0,4">
                &#x2022; A Profile is a set of mods you switch between (e.g. "Vanilla Plus").
            </TextBlock>
            <TextBlock DockPanel.Dock="Top" TextWrapping="Wrap" FontSize="12"
                       Foreground="{StaticResource SubtleTextBrush}" Margin="0,0,0,4">
                &#x2022; A Collection is a bundle of related mods treated as a single item (e.g. "Fruit Mods"). Collections are NOT profiles.
            </TextBlock>
            <TextBlock DockPanel.Dock="Top" TextWrapping="Wrap" FontSize="12"
                       Foreground="{StaticResource SubtleTextBrush}" Margin="0,0,0,4">
                &#x2022; Disabled Mods are individual mods that have been turned off.
            </TextBlock>

            <Button DockPanel.Dock="Top" Style="{StaticResource WikiLinkButton}"
                    Command="{Binding OpenWikiCommand}" Margin="0,4,0,12"/>

            <StackPanel DockPanel.Dock="Bottom" Orientation="Horizontal" Margin="0,12,0,0">
                <Button Content="Confirm"
                        Style="{StaticResource StardewButton}"
                        Command="{Binding ConfirmFolderVerificationCommand}"
                        Margin="0,0,8,0"/>
                <Button Content="Cancel"
                        Style="{StaticResource StardewButton}"
                        Command="{Binding CancelRefreshDetectionCommand}"
                        Visibility="{Binding IsRefreshDetection, Converter={StaticResource BoolToVis}}"/>
            </StackPanel>

            <ScrollViewer VerticalScrollBarVisibility="Auto">
                <ItemsControl ItemsSource="{Binding DetectedFolders}">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate DataType="{x:Type vm:DetectedFolderItem}">
                            <Border Background="{StaticResource CardBgBrush}"
                                    BorderBrush="{StaticResource CardBorderBrush}"
                                    BorderThickness="1" CornerRadius="4"
                                    Padding="10,8" Margin="0,0,0,6">
                                <StackPanel>
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="{Binding FolderName}"
                                                   FontWeight="SemiBold" FontSize="13"
                                                   Foreground="{StaticResource DarkEarthBrush}"/>
                                        <TextBlock FontSize="11" Foreground="{StaticResource SubtleTextBrush}"
                                                   VerticalAlignment="Center" Margin="8,0,0,0">
                                            <TextBlock.Style>
                                                <Style TargetType="TextBlock">
                                                    <Setter Property="Text"
                                                            Value="{Binding SubModCount, StringFormat='{}{0} mod(s) inside'}"/>
                                                    <Style.Triggers>
                                                        <DataTrigger Binding="{Binding IsLikelyDisabledMod}" Value="True">
                                                            <Setter Property="Text" Value="Single disabled mod"/>
                                                        </DataTrigger>
                                                    </Style.Triggers>
                                                </Style>
                                            </TextBlock.Style>
                                        </TextBlock>
                                    </StackPanel>

                                    <!-- Classification radio buttons -->
                                    <StackPanel Orientation="Horizontal" Margin="0,6,0,0">
                                        <RadioButton Content="Profile"
                                                     GroupName="{Binding FolderName}"
                                                     IsChecked="{Binding Classification,
                                                         Converter={StaticResource EnumToBool},
                                                         ConverterParameter=Profile}"
                                                     Margin="0,0,14,0" FontSize="12"
                                                     Foreground="{StaticResource DarkEarthBrush}"
                                                     Cursor="Hand"/>
                                        <RadioButton Content="Collection"
                                                     GroupName="{Binding FolderName}"
                                                     IsChecked="{Binding Classification,
                                                         Converter={StaticResource EnumToBool},
                                                         ConverterParameter=Collection}"
                                                     Margin="0,0,14,0" FontSize="12"
                                                     Foreground="{StaticResource DarkEarthBrush}"
                                                     Cursor="Hand"/>
                                        <RadioButton Content="Disabled Mod"
                                                     GroupName="{Binding FolderName}"
                                                     IsChecked="{Binding Classification,
                                                         Converter={StaticResource EnumToBool},
                                                         ConverterParameter=DisabledMod}"
                                                     FontSize="12"
                                                     Foreground="{StaticResource DarkEarthBrush}"
                                                     Cursor="Hand"/>
                                    </StackPanel>
                                </StackPanel>
                            </Border>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
            </ScrollViewer>
        </DockPanel>
    </Border>
</UserControl>
