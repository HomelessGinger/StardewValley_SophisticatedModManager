<UserControl x:Class="SophisticatedModManager.Views.Overlays.SettingsOverlay"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="clr-namespace:SophisticatedModManager.ViewModels"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d"
             d:DataContext="{d:DesignInstance Type=vm:MainViewModel}">
    <Border Background="{StaticResource ContentBgBrush}" Padding="30,20">
        <StackPanel MaxWidth="500" HorizontalAlignment="Left">
            <TextBlock Text="Settings"
                       FontSize="20" FontWeight="Bold"
                       Foreground="{StaticResource WoodBrownBrush}"
                       Margin="0,0,0,20"/>

            <!-- Saves Path -->
            <TextBlock Text="Stardew Valley Saves Path"
                       FontSize="13" FontWeight="SemiBold"
                       Foreground="{StaticResource DarkEarthBrush}"
                       Margin="0,0,0,4"/>
            <Grid Margin="0,0,0,16">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <TextBox Grid.Column="0"
                         Style="{StaticResource StardewTextBox}"
                         Text="{Binding SettingsSavesPath, UpdateSourceTrigger=PropertyChanged}"/>
                <Button Grid.Column="1" Content="Browse"
                        Style="{StaticResource StardewButton}"
                        Command="{Binding BrowseSavesPathCommand}"
                        Margin="8,0,0,0" Padding="10,4" FontSize="12"/>
            </Grid>

            <!-- Game Path -->
            <TextBlock Text="Stardew Valley Game Path"
                       FontSize="13" FontWeight="SemiBold"
                       Foreground="{StaticResource DarkEarthBrush}"
                       Margin="0,0,0,4"/>
            <Grid Margin="0,0,0,24">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <TextBox Grid.Column="0"
                         Style="{StaticResource StardewTextBox}"
                         Text="{Binding SettingsGamePath, UpdateSourceTrigger=PropertyChanged}"/>
                <Button Grid.Column="1" Content="Browse"
                        Style="{StaticResource StardewButton}"
                        Command="{Binding BrowseGamePathCommand}"
                        Margin="8,0,0,0" Padding="10,4" FontSize="12"/>
            </Grid>

            <!-- Display Options -->
            <TextBlock Text="Display"
                       FontSize="13" FontWeight="SemiBold"
                       Foreground="{StaticResource DarkEarthBrush}"
                       Margin="0,0,0,6"/>
            <CheckBox Style="{StaticResource StardewCheckBox}"
                      IsChecked="{Binding SettingsShowModDescriptions}"
                      Margin="0,0,0,8">
                <TextBlock Text="Show mod descriptions in mod list"
                           FontSize="12"
                           Foreground="{StaticResource DarkEarthBrush}"
                           Margin="6,0,0,0"
                           VerticalAlignment="Center"/>
            </CheckBox>
            <CheckBox Style="{StaticResource StardewCheckBox}"
                      IsChecked="{Binding SettingsResetSearchOnSwitch}"
                      Margin="0,0,0,24">
                <TextBlock Text="Clear search when switching profiles"
                           FontSize="12"
                           Foreground="{StaticResource DarkEarthBrush}"
                           Margin="6,0,0,0"
                           VerticalAlignment="Center"/>
            </CheckBox>

            <!-- Nexus Mods Integration -->
            <TextBlock Text="Nexus Mods Integration"
                       FontSize="13" FontWeight="SemiBold"
                       Foreground="{StaticResource DarkEarthBrush}"
                       Margin="0,0,0,4"/>
            <TextBlock Text="Enter your personal API key from nexusmods.com (Account Settings > API Keys). This enables update checking and mod browsing."
                       FontSize="11" Foreground="{StaticResource SubtleTextBrush}"
                       TextWrapping="Wrap" Margin="0,0,0,6"/>
            <Grid Margin="0,0,0,4">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <TextBox Grid.Column="0"
                         Style="{StaticResource StardewTextBox}"
                         Text="{Binding SettingsNexusApiKey, UpdateSourceTrigger=PropertyChanged}"/>
                <Button Grid.Column="1" Content="Validate"
                        Style="{StaticResource StardewButton}"
                        Command="{Binding ValidateNexusApiKeyCommand}"
                        Margin="8,0,0,0" Padding="10,4" FontSize="12"/>
            </Grid>
            <TextBlock Text="{Binding NexusApiKeyStatus}"
                       FontSize="11" Foreground="{StaticResource LeafGreenBrush}"
                       Margin="0,0,0,24"/>

            <!-- Save Backups -->
            <TextBlock Text="Save Backups" FontSize="13" FontWeight="SemiBold"
                       Foreground="{StaticResource DarkEarthBrush}" Margin="0,0,0,4"/>
            <TextBlock Text="Automatically back up saves when adding mods. Set to 0 to disable."
                       FontSize="11" Foreground="{StaticResource SubtleTextBrush}" TextWrapping="Wrap" Margin="0,0,0,6"/>
            <StackPanel Orientation="Horizontal" Margin="0,0,0,24">
                <TextBlock Text="Max backups per save:" FontSize="12"
                           Foreground="{StaticResource DarkEarthBrush}" VerticalAlignment="Center" Margin="0,0,8,0"/>
                <TextBox Style="{StaticResource StardewTextBox}"
                         Text="{Binding SettingsMaxSaveBackups, UpdateSourceTrigger=PropertyChanged}"
                         Width="50" FontSize="12" Padding="6,4"/>
            </StackPanel>

            <!-- Buttons -->
            <StackPanel Orientation="Horizontal">
                <Button Content="Save Settings"
                        Style="{StaticResource StardewButton}"
                        Command="{Binding SaveSettingsCommand}"
                        Margin="0,0,8,0"/>
                <Button Content="Cancel"
                        Style="{StaticResource StardewButton}"
                        Command="{Binding CloseSettingsCommand}"/>
                <Button Content="Open Config Folder"
                        Style="{StaticResource StardewButton}"
                        Command="{Binding OpenConfigFolderCommand}"
                        Margin="8,0,0,0"/>
            </StackPanel>
        </StackPanel>
    </Border>
</UserControl>
